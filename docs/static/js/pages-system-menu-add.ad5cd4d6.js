(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-system-menu-add"],{2759:function(a,t,e){"use strict";e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return n}));var n={uniForms:e("8374").default,uniFormsItem:e("6de0").default,uniEasyinput:e("6a65").default,uniLink:e("ba03").default,uniDataCheckbox:e("9a97").default,uniPopup:e("ac10").default},i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-uni-view",{staticClass:"uni-container"},[e("uni-forms",{ref:"form",attrs:{labelWidth:"80",rules:a.rules,validateTrigger:"bind"},on:{submit:function(t){arguments[0]=t=a.$handleEvent(t),a.submit.apply(void 0,arguments)}},model:{value:a.formData,callback:function(t){a.formData=t},expression:"formData"}},[e("uni-forms-item",{attrs:{name:"menu_id",label:"标识",required:!0}},[e("uni-easyinput",{attrs:{clearable:!1,placeholder:"请输入菜单项的ID，不可重复"},model:{value:a.formData.menu_id,callback:function(t){a.$set(a.formData,"menu_id",t)},expression:"formData.menu_id"}})],1),e("uni-forms-item",{attrs:{name:"name",label:"显示名称",required:!0}},[e("uni-easyinput",{attrs:{clearable:!1,placeholder:"请输入菜单名称"},model:{value:a.formData.name,callback:function(t){a.$set(a.formData,"name",t)},expression:"formData.name"}})],1),e("uni-forms-item",{staticStyle:{"margin-bottom":"10px"},attrs:{name:"icon",label:"图标class"}},[e("uni-easyinput",{attrs:{clearable:!1,placeholder:"请输入菜单图标css样式类名"},scopedSlots:a._u([{key:"right",fn:function(){return[e("span",{staticStyle:{color:"#007aff",cursor:"pointer","padding-right":"10px"},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.showIconPopup.apply(void 0,arguments)}}},[a._v("内置图标")])]},proxy:!0}]),model:{value:a.formData.icon,callback:function(t){a.$set(a.formData,"icon",t)},expression:"formData.icon"}}),e("uni-link",{staticClass:"uni-form-item-tips",attrs:{"font-size":"12",href:"https://uniapp.dcloud.net.cn/uniCloud/admin?id=icon-%e5%9b%be%e6%a0%87",text:"如何使用自定义图标？"}})],1),e("uni-forms-item",{attrs:{name:"url",label:"页面URL"}},[e("uni-easyinput",{attrs:{clearable:!1,placeholder:"URL必须是/开头，若URL为空代表是目录而不是叶子节点"},model:{value:a.formData.url,callback:function(t){a.$set(a.formData,"url",t)},expression:"formData.url"}})],1),e("uni-forms-item",{attrs:{name:"sort",label:"序号"}},[e("uni-easyinput",{attrs:{clearable:!1,placeholder:"请输入菜单序号（越大越靠后）"},model:{value:a.formData.sort,callback:function(t){a.$set(a.formData,"sort",t)},expression:"formData.sort"}})],1),e("uni-forms-item",{attrs:{name:"parent_id",label:"父菜单标识"}},[e("uni-easyinput",{attrs:{disabled:!0,clearable:!1,placeholder:"新增菜单时自动填充, 一级菜单不需要填写"},model:{value:a.formData.parent_id,callback:function(t){a.$set(a.formData,"parent_id",t)},expression:"formData.parent_id"}})],1),e("uni-forms-item",{staticClass:"flex-center-x",attrs:{name:"permission",label:"权限列表"}},[e("uni-data-checkbox",{attrs:{multiple:!0,collection:"uni-id-permissions","page-size":500,field:"permission_name as text, permission_id as value"},model:{value:a.formData.permission,callback:function(t){a.$set(a.formData,"permission",t)},expression:"formData.permission"}}),e("v-uni-view",{staticClass:"uni-form-item-tips"},[a._v("当用户拥有以上被选中的权限时，可以访问此菜单。建议仅对子菜单配置权限，父菜单会自动包含。如不选择权限，意味着仅超级管理员可访问本菜单")])],1),e("uni-forms-item",{attrs:{name:"enable",label:"是否启用"}},[e("v-uni-switch",{attrs:{checked:a.formData.enable},on:{change:function(t){arguments[0]=t=a.$handleEvent(t),a.binddata("enable",t.detail.value)}}})],1),e("v-uni-view",{staticClass:"uni-button-group"},[e("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.submitForm.apply(void 0,arguments)}}},[a._v(a._s(a.$t("common.button.submit")))]),e("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[e("v-uni-button",{staticClass:"uni-button",attrs:{tyle:"width: 100px;"}},[a._v(a._s(a.$t("common.button.back")))])],1)],1)],1),e("uni-popup",{ref:"iconPopup",staticClass:"icon-modal-box",attrs:{type:"center"}},[e("v-uni-view",{staticClass:"icon-modal icon-modal-pc"},[e("Icons",{attrs:{tag:!1,"fix-window":!1}})],1)],1)],1)},o=[]},"9d1b":function(a,t,e){"use strict";var n=e("a442"),i=e.n(n);i.a},a31e:function(a,t,e){"use strict";(function(a){e("6a54");var n=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(e("9b1b"));e("4626"),e("5ac7"),e("bf0f");var o=n(e("0b6a")),r=n(e("6b83")),s=a.database();s.command;function u(a){var t={};for(var e in o.default)a.includes(e)&&(t[e]=o.default[e]);return t}var l={components:{Icons:r.default},data:function(){return{formData:{menu_id:"",name:"",icon:"",url:"",sort:null,parent_id:"",permission:[],enable:!0},rules:(0,i.default)({},u(["menu_id","name","icon","url","sort","parent_id","permission","enable"]))}},onLoad:function(a){a.parent_id&&(this.formData.parent_id=a.parent_id)},methods:{submitForm:function(){this.$refs.form.submit()},submit:function(a){var t=this,e=a.detail,n=e.value,i=e.errors;i||(uni.showLoading({title:"提交中...",mask:!0}),s.collection("opendb-admin-menus").add(n).then((function(a){uni.showToast({title:"新增成功"}),t.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(a){uni.showModal({content:a.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()})))},showIconPopup:function(){this.$refs.iconPopup.open()}}};t.default=l}).call(this,e("861b")["default"])},a442:function(a,t,e){var n=e("b6f7");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);var i=e("967d").default;i("628670cf",n,!0,{sourceMap:!1,shadowMode:!1})},b2ac:function(a,t,e){"use strict";e.r(t);var n=e("a31e"),i=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(a){e.d(t,a,(function(){return n[a]}))}(o);t["default"]=i.a},b6f7:function(a,t,e){var n=e("c86c");t=n(!1),t.push([a.i,".icon-modal-box[data-v-12328e3c]{padding-top:var(--top-window-height)}.icon-modal[data-v-12328e3c]{width:350px;background-color:#fff;height:500px;overflow-y:scroll}@media screen and (min-width:768px){.icon-modal-pc[data-v-12328e3c]{width:600px}}[data-v-12328e3c] .uni-forms-item__label{width:90px!important}",""]),a.exports=t},bc1e:function(a,t,e){"use strict";e.r(t);var n=e("2759"),i=e("b2ac");for(var o in i)["default"].indexOf(o)<0&&function(a){e.d(t,a,(function(){return i[a]}))}(o);e("9d1b");var r=e("828b"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"12328e3c",null,!1,n["a"],void 0);t["default"]=s.exports}}]);